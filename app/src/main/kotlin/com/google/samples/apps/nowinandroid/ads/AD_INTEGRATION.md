# AdMob åŸç”Ÿå¹¿å‘Šé›†æˆè¯´æ˜

## ğŸ“ å¹¿å‘Šé›†æˆä½ç½®

### å½“å‰çŠ¶æ€
**âš ï¸ æ³¨æ„ï¼š** å¹¿å‘ŠåŸºç¡€è®¾æ–½å·²åˆ›å»ºå®Œæˆï¼Œä½†**å°šæœªé›†æˆåˆ°ä»»ä½• UI ç•Œé¢**ã€‚

### å·²åˆ›å»ºçš„æ–‡ä»¶
1. **`NativeAdManager.kt`** - å¹¿å‘Šç®¡ç†å™¨ï¼Œè´Ÿè´£åŠ è½½å’Œç®¡ç†åŸç”Ÿå¹¿å‘Š
2. **`NativeAdCard.kt`** - Compose ç»„ä»¶ï¼Œç”¨äºæ˜¾ç¤ºåŸç”Ÿå¹¿å‘Šå¡ç‰‡
3. **`GoogleMobileAdsConsentManager.kt`** - ç”¨æˆ·åŒæ„ç®¡ç†å™¨ï¼Œå¤„ç† GDPR ç­‰éšç§åˆè§„è¦æ±‚
4. **`MainActivity.kt`** - å·²æ·»åŠ  AdMob SDK åˆå§‹åŒ–ä»£ç 

### éœ€è¦é›†æˆå¹¿å‘Šçš„ç•Œé¢
æ ¹æ®é¡¹ç›®ç»“æ„ï¼Œå»ºè®®åœ¨ä»¥ä¸‹ç•Œé¢é›†æˆå¹¿å‘Šï¼š

1. **ForYouScreen** (`feature/foryou/src/main/kotlin/com/google/samples/apps/nowinandroid/feature/foryou/ForYouScreen.kt`)
   - åœ¨æ–°é—»åˆ—è¡¨ä¸­æ¯ 5-10 æ¡æ–°é—»åæ’å…¥ä¸€æ¡å¹¿å‘Š
   - è¿™æ˜¯ä¸»è¦çš„æ–°é—»æµç•Œé¢ï¼Œæœ€é€‚åˆå±•ç¤ºåŸç”Ÿå¹¿å‘Š

2. **TopicScreen** (`feature/topic/src/main/kotlin/com/google/samples/apps/nowinandroid/feature/topic/TopicScreen.kt`)
   - åœ¨ä¸»é¢˜è¯¦æƒ…é¡µçš„æ–°é—»åˆ—è¡¨ä¸­æ’å…¥å¹¿å‘Š

3. **SearchScreen** (`feature/search/src/main/kotlin/com/google/samples/apps/nowinandroid/feature/search/SearchScreen.kt`)
   - åœ¨æœç´¢ç»“æœåˆ—è¡¨ä¸­æ’å…¥å¹¿å‘Š

## ğŸ” Logcat æ—¥å¿—æŸ¥çœ‹æŒ‡å—

### æ—¥å¿—å…³é”®å­—ï¼ˆTagï¼‰

åœ¨ Android Studio çš„ Logcat ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å…³é”®å­—è¿‡æ»¤å¹¿å‘Šç›¸å…³æ—¥å¿—ï¼š

#### 1. **NativeAdManager** - å¹¿å‘Šç®¡ç†å™¨æ—¥å¿—
- **ç”¨é€”**ï¼šæŸ¥çœ‹å¹¿å‘ŠåŠ è½½ã€ç¼“å­˜ã€é”€æ¯ç­‰ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
- **ä½¿ç”¨æ–¹æ³•**ï¼šåœ¨ Logcat è¿‡æ»¤æ¡†ä¸­è¾“å…¥ `NativeAdManager`
- **åŒ…å«ä¿¡æ¯**ï¼š
  - SDK åˆå§‹åŒ–çŠ¶æ€
  - å¹¿å‘ŠåŠ è½½è¯·æ±‚å’Œç»“æœ
  - å¹¿å‘Šç¼“å­˜çŠ¶æ€
  - å¹¿å‘Šç‚¹å‡»å’Œå±•ç¤ºäº‹ä»¶

#### 2. **NativeAdCard** - å¹¿å‘Šå¡ç‰‡ UI æ—¥å¿—
- **ç”¨é€”**ï¼šæŸ¥çœ‹å¹¿å‘Šå¡ç‰‡çš„æ¸²æŸ“å’Œäº¤äº’äº‹ä»¶
- **ä½¿ç”¨æ–¹æ³•**ï¼šåœ¨ Logcat è¿‡æ»¤æ¡†ä¸­è¾“å…¥ `NativeAdCard`
- **åŒ…å«ä¿¡æ¯**ï¼š
  - å¹¿å‘Šå¡ç‰‡æ¸²æŸ“å¼€å§‹/å®Œæˆ
  - ç”¨æˆ·ç‚¹å‡»äº‹ä»¶
  - è§†å›¾ç»‘å®šå’Œæ¸…ç†

#### 3. **ConsentManager** - ç”¨æˆ·åŒæ„æ—¥å¿—
- **ç”¨é€”**ï¼šæŸ¥çœ‹ç”¨æˆ·åŒæ„ç®¡ç†ç›¸å…³äº‹ä»¶
- **ä½¿ç”¨æ–¹æ³•**ï¼šåœ¨ Logcat è¿‡æ»¤æ¡†ä¸­è¾“å…¥ `ConsentManager`
- **åŒ…å«ä¿¡æ¯**ï¼š
  - åŒæ„ç®¡ç†å™¨åˆå§‹åŒ–
  - åŒæ„è¡¨å•åŠ è½½å’Œæ˜¾ç¤º
  - ç”¨æˆ·åŒæ„çŠ¶æ€å˜åŒ–

### æ—¥å¿—æ ¼å¼è¯´æ˜

æ‰€æœ‰å¹¿å‘Šæ—¥å¿—éƒ½ä½¿ç”¨ç»Ÿä¸€çš„æ ¼å¼ï¼ŒåŒ…å«ï¼š
- **ç”Ÿå‘½å‘¨æœŸæ ‡è¯†**ï¼šå¦‚ `[å¹¿å‘Šç”Ÿå‘½å‘¨æœŸ]`ã€`[å¹¿å‘ŠUI]`ã€`[ç”¨æˆ·åŒæ„]`
- **çŠ¶æ€å›¾æ ‡**ï¼šä½¿ç”¨ emoji æ ‡è¯†ä¸åŒçŠ¶æ€
  - ğŸš€ åˆå§‹åŒ–/å¼€å§‹
  - âœ… æˆåŠŸ
  - âŒ å¤±è´¥/é”™è¯¯
  - âš ï¸ è­¦å‘Š
  - ğŸ“¥ åŠ è½½
  - ğŸ’¾ ç¼“å­˜
  - ğŸ—‘ï¸ é”€æ¯
  - ğŸ‘† ç‚¹å‡»
  - ğŸ‘ï¸ å±•ç¤º
  - ğŸ” æ£€æŸ¥
  - â„¹ï¸ ä¿¡æ¯

### ç¤ºä¾‹æ—¥å¿—è¾“å‡º

```
NativeAdManager: â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NativeAdManager: ğŸš€ [å¹¿å‘Šç”Ÿå‘½å‘¨æœŸ] å¼€å§‹åˆå§‹åŒ– AdMob SDK
NativeAdManager: â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
NativeAdManager: âœ… [å¹¿å‘Šç”Ÿå‘½å‘¨æœŸ] AdMob SDK åˆå§‹åŒ–å®Œæˆ
NativeAdManager: ğŸ“Š [å¹¿å‘Šç”Ÿå‘½å‘¨æœŸ] é€‚é…å™¨çŠ¶æ€:
NativeAdManager:    - com.google.ads.mediation.admob.AdMobAdapter: READY
NativeAdManager: â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ¯ å¦‚ä½•é›†æˆå¹¿å‘Šåˆ°ç•Œé¢

### æ­¥éª¤ 1ï¼šåœ¨ ViewModel ä¸­æ³¨å…¥ NativeAdManager

```kotlin
@HiltViewModel
class ForYouViewModel @Inject constructor(
    // ... å…¶ä»–ä¾èµ–
    private val nativeAdManager: NativeAdManager,
) : ViewModel() {
    // ...
}
```

### æ­¥éª¤ 2ï¼šåŠ è½½å¹¿å‘Š

```kotlin
// åœ¨ ViewModel ä¸­
fun loadAd(context: Context) {
    viewModelScope.launch {
        nativeAdManager.loadNativeAd(context)
            .onSuccess { ad ->
                // å¹¿å‘ŠåŠ è½½æˆåŠŸï¼Œæ›´æ–° UI çŠ¶æ€
            }
            .onFailure { error ->
                // å¹¿å‘ŠåŠ è½½å¤±è´¥ï¼Œè®°å½•é”™è¯¯
            }
    }
}
```

### æ­¥éª¤ 3ï¼šåœ¨ Compose UI ä¸­æ˜¾ç¤ºå¹¿å‘Š

```kotlin
// åœ¨ Screen Composable ä¸­
val nativeAd by viewModel.nativeAdState.collectAsStateWithLifecycle()

LazyColumn {
    items(newsItems) { item ->
        NewsCard(item)
    }
    
    // æ’å…¥å¹¿å‘Š
    if (nativeAd != null) {
        item {
            NativeAdCard(nativeAd = nativeAd)
        }
    }
}
```

## ğŸ“± åœ¨å“ªäº›ç•Œé¢å¯ä»¥çœ‹åˆ°å¹¿å‘Š

**å½“å‰çŠ¶æ€ï¼š** å¹¿å‘Šå°šæœªé›†æˆåˆ°ä»»ä½•ç•Œé¢ï¼Œå› æ­¤**æ— æ³•åœ¨ä»»ä½•ç•Œé¢çœ‹åˆ°å¹¿å‘Š**ã€‚

**è®¡åˆ’é›†æˆä½ç½®ï¼š**
1. **ForYou ç•Œé¢**ï¼ˆé¦–é¡µï¼‰- æ–°é—»æµä¸­æ¯ 5-10 æ¡æ–°é—»åæ’å…¥ä¸€æ¡å¹¿å‘Š
2. **Topic ç•Œé¢**ï¼ˆä¸»é¢˜è¯¦æƒ…é¡µï¼‰- ä¸»é¢˜ç›¸å…³æ–°é—»åˆ—è¡¨ä¸­æ’å…¥å¹¿å‘Š
3. **Search ç•Œé¢**ï¼ˆæœç´¢ç»“æœé¡µï¼‰- æœç´¢ç»“æœåˆ—è¡¨ä¸­æ’å…¥å¹¿å‘Š

## ğŸ”§ æµ‹è¯•å¹¿å‘Š

### æµ‹è¯•å¹¿å‘Šå•å…ƒ ID
å½“å‰ä½¿ç”¨çš„æ˜¯ Google æä¾›çš„æµ‹è¯•å¹¿å‘Šå•å…ƒ IDï¼š
- **åŸç”Ÿå¹¿å‘Šå•å…ƒ ID**: `ca-app-pub-3940256099942544/2247696110`
- **åº”ç”¨ ID**: `ca-app-pub-3940256099942544~3347511713`

### å‘å¸ƒå‰æ³¨æ„äº‹é¡¹
âš ï¸ **é‡è¦**ï¼šåœ¨å‘å¸ƒåº”ç”¨å‰ï¼Œå¿…é¡»ï¼š
1. æ›¿æ¢æµ‹è¯•å¹¿å‘Šå•å…ƒ ID ä¸ºå®é™…çš„å¹¿å‘Šå•å…ƒ ID
2. æ›¿æ¢æµ‹è¯•åº”ç”¨ ID ä¸ºå®é™…çš„åº”ç”¨ ID
3. ç§»é™¤æˆ–æ³¨é‡Šæ‰æµ‹è¯•è®¾å¤‡ ID è®¾ç½®
4. ç¡®ä¿ç”¨æˆ·åŒæ„æµç¨‹æ­£å¸¸å·¥ä½œ

## ğŸ“Š å¹¿å‘Šç”Ÿå‘½å‘¨æœŸ

### å®Œæ•´ç”Ÿå‘½å‘¨æœŸæµç¨‹

1. **åº”ç”¨å¯åŠ¨**
   - `MainActivity.onCreate()` â†’ åˆå§‹åŒ– `GoogleMobileAdsConsentManager`
   - `MainActivity.onCreate()` â†’ åˆå§‹åŒ– `NativeAdManager`ï¼ˆAdMob SDKï¼‰

2. **ç”¨æˆ·åŒæ„ï¼ˆå¦‚éœ€è¦ï¼‰**
   - `GoogleMobileAdsConsentManager.initialize()` â†’ æ£€æŸ¥æ˜¯å¦éœ€è¦æ˜¾ç¤ºåŒæ„è¡¨å•
   - å¦‚æœéœ€è¦ â†’ æ˜¾ç¤ºåŒæ„è¡¨å• â†’ ç”¨æˆ·é€‰æ‹© â†’ æ›´æ–°åŒæ„çŠ¶æ€

3. **åŠ è½½å¹¿å‘Š**
   - UI è¯·æ±‚å¹¿å‘Š â†’ `NativeAdManager.loadNativeAd()` â†’ åˆ›å»º AdLoader â†’ è¯·æ±‚å¹¿å‘Š
   - æˆåŠŸ â†’ ç¼“å­˜å¹¿å‘Š â†’ è¿”å›ç»™ UI
   - å¤±è´¥ â†’ è®°å½•é”™è¯¯ â†’ è¿”å›é”™è¯¯

4. **æ˜¾ç¤ºå¹¿å‘Š**
   - UI è°ƒç”¨ `NativeAdCard()` â†’ æ¸²æŸ“å¹¿å‘Šå¡ç‰‡ â†’ ç»‘å®šåˆ° NativeAdView
   - ç”¨æˆ·çœ‹åˆ°å¹¿å‘Š â†’ è®°å½• Impression

5. **ç”¨æˆ·äº¤äº’**
   - ç”¨æˆ·ç‚¹å‡»å¹¿å‘Š â†’ æ‰“å¼€å¹¿å‘Šè¯¦æƒ… â†’ è®°å½•ç‚¹å‡»äº‹ä»¶

6. **æ¸…ç†**
   - ç•Œé¢é”€æ¯ â†’ æ¸…ç†è§†å›¾ â†’ é”€æ¯å¹¿å‘Šå¯¹è±¡ï¼ˆå¦‚éœ€è¦ï¼‰

## ğŸ› è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æ‰€æœ‰å¹¿å‘Šç›¸å…³æ—¥å¿—
åœ¨ Logcat ä¸­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤ï¼š
```
NativeAdManager|NativeAdCard|ConsentManager
```

### æŸ¥çœ‹ç‰¹å®šç”Ÿå‘½å‘¨æœŸäº‹ä»¶
- åˆå§‹åŒ–ï¼š`NativeAdManager.*åˆå§‹åŒ–`
- åŠ è½½ï¼š`NativeAdManager.*åŠ è½½`
- ç‚¹å‡»ï¼š`NativeAdManager.*ç‚¹å‡»` æˆ– `NativeAdCard.*ç‚¹å‡»`
- é”™è¯¯ï¼š`NativeAdManager.*å¤±è´¥` æˆ– `NativeAdManager.*é”™è¯¯`

### å¸¸è§é—®é¢˜æ’æŸ¥

1. **å¹¿å‘Šä¸æ˜¾ç¤º**
   - æ£€æŸ¥ Logcat ä¸­æ˜¯å¦æœ‰ `NativeAdManager` çš„åŠ è½½æ—¥å¿—
   - æ£€æŸ¥æ˜¯å¦æœ‰é”™è¯¯æ—¥å¿—ï¼ˆ`âŒ`ï¼‰
   - ç¡®è®¤ç”¨æˆ·åŒæ„çŠ¶æ€æ˜¯å¦å…è®¸åŠ è½½å¹¿å‘Š

2. **å¹¿å‘ŠåŠ è½½å¤±è´¥**
   - æŸ¥çœ‹é”™è¯¯ä»£ç å’Œé”™è¯¯ä¿¡æ¯
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤å¹¿å‘Šå•å…ƒ ID æ˜¯å¦æ­£ç¡®

3. **ç‚¹å‡»æ— å“åº”**
   - æ£€æŸ¥ `NativeAdCard` çš„ç‚¹å‡»æ—¥å¿—
   - ç¡®è®¤å¹¿å‘Šæ˜¯å¦æ­£ç¡®ç»‘å®šåˆ° `NativeAdView`

## ğŸ“ ç›¸å…³æ–‡ä»¶è·¯å¾„

- å¹¿å‘Šç®¡ç†å™¨ï¼š`app/src/main/kotlin/com/google/samples/apps/nowinandroid/ads/NativeAdManager.kt`
- å¹¿å‘Šå¡ç‰‡ç»„ä»¶ï¼š`app/src/main/kotlin/com/google/samples/apps/nowinandroid/ads/NativeAdCard.kt`
- ç”¨æˆ·åŒæ„ç®¡ç†å™¨ï¼š`app/src/main/kotlin/com/google/samples/apps/nowinandroid/ads/GoogleMobileAdsConsentManager.kt`
- ä¸» Activityï¼š`app/src/main/kotlin/com/google/samples/apps/nowinandroid/MainActivity.kt`
- AndroidManifestï¼š`app/src/main/AndroidManifest.xml`

